{
  "nodes": [
    {
      "name": "input_mic_0_en",
      "node_type": "input_channel",
      "device": 9,
      "channel": 1,
      "stream": {
        "language": "en",
        "rate": 44100,
        "audio_format": {
          "format_type": "int16"
        }
      }
    },
    {
      "name": "resampler_input_0_en",
      "node_type": "resampler",
      "to_rate": 16000
    },
    {
      "name": "converter_0_en_ru",
      "node_type": "converter_seamless",
      "server_url": "http://127.0.0.1:8000",
      "log_file": "leo_mic.log",
      "config": {
        "stt": {
          "lang": "en",
          "stop_words": [
            "DimaTorzok",
            "субтитры сделал",
            "субтитры делал",
            "M.K."
          ],
          "buffer_min_words_size": 6,
          "buffer_timeout_seconds": 1.0
        },
        "translate": {
          "lang_from": "en",
          "lang_to": "ru",
          "llm_call_timeout": 15.0,
          "context_window": 4,
          "forced_line_end": "...",
          "escaped_characters": [
              "\n",
              "\r",
              "\t",
              "..."
          ],
          "language_map": {
              "ru": "Russian",
              "en": "English"
          },
          "text_template": "I want you to act as a skilled translator.\nI will provide you with:\n- the original context (previous parts in the source language),\n- the translated context (previous parts translated into the target language),\n- the source and target languages,\n- the next part to translate (new input in the source language).\n\nYour task is to:\n1. Translate the \"next part to translate\" into the target language, without any additional explanations or comments, only the translated phrase.\n2. Ensure that the translation is consistent with the \"original context\" and continues seamlessly from the \"translated context\".\n3. If there are words or phrases in the original context that are missing in the translated context, do not retranslate them. Focus only on translating the \"next part to translate\".\n4. Provide the translation as a direct continuation of the translated context.\n\nOriginal context (source language): {source_context}\nTranslated context (target language): {translated_context}\nSource language: {lang_from}\nTarget language: {lang_to}\nNext part to translate (source language): {text}",
          "correction_template": ""
        },
        "tts": {
          "lang": "ru",
          "gap_size_bytes": 12000,
          "voice_map": {
              "en": ["piper", "hfc_male"],
              "ru": ["piper", "ruslan"]
          }
        }
      }
    },
    {
      "name": "output_file_mic",
      "node_type": "output_file",
      "path": "samples/source_input.wav",
      "stream": {
        "language": "ru",
        "audio_format": {
          "format_type": "int16"
        },
        "rate": 16000
      }
    },
    {
      "name": "output_device_1_ru",
      "device": 9,
      "channel": 1,
      "stream": {
        "language": "ru",
        "audio_format": {
          "format_type": "int16"
        },
        "rate": 44100
      },
      "node_type": "output_channel"
    },
    {
      "name": "output_file_1_ru",
      "node_type": "output_file",
      "path": "samples/translated_output.wav",
      "stream": {
        "language": "ru",
        "audio_format": {
          "format_type": "int16"
        },
        "rate": 44100
      }
    },
    {
      "name": "resampler_output_1",
      "node_type": "resampler",
      "to_rate": 44100
    },
    {
      "name": "mixer_1_ru",
      "node_type": "mixer"
    }
  ],
  "edges": [
    [
      "input_mic_0_en",
      "resampler_input_0_en"
    ],
    [
      "resampler_output_1",
      "output_device_1_ru"
    ],
    [
      "resampler_output_1",
      "output_file_1_ru"
    ],
    [
      "mixer_1_ru",
      "resampler_output_1"
    ],
    [
      "mixer_0_ru",
      "output_file_0_ru"
    ],
    [
      "converter_0_en_ru",
      "mixer_1_ru"
    ],
    [
      "resampler_input_0_en",
      "converter_0_en_ru"
    ],
    [
      "resampler_input_0_en",
      "output_file_mic"
    ]
  ]
}